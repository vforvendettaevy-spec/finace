<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Financier - LUKA</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
      padding: 20px; min-height: 100vh;
    }
    .container { max-width: 1400px; margin: 0 auto; }
    .header {
      background: linear-gradient(135deg, #39b46e 0%, #2d8f57 100%);
      color: white; padding: 30px; border-radius: 20px; margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(57, 180, 110, 0.3);
    }
    .header h1 { font-size: 32px; margin-bottom: 10px; }
    .header p { opacity: 0.9; font-size: 16px; }
    .chart-container {
      background: white; border-radius: 16px; padding: 25px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); margin-bottom: 30px;
    }
    #addRowForm input, #addRowForm button {
      margin: 5px 0; padding: 10px; border-radius: 6px; border: 1px solid #ccc; width: 100%;
    }
    #addRowForm button {
      background: #39b46e; color: white; font-weight: bold;
      border: none; cursor: pointer; transition: background 0.2s;
    }
    #addRowForm button:hover { background: #2d8f57; }
    #formMessage { margin-top: 10px; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìä Dashboard Financier</h1>
      <p>Ajoute une ligne √† ton Google Sheets</p>
    </div>

    <!-- Formulaire d'ajout -->
    <div class="chart-container">
      <h3 class="card-title">‚ûï Ajouter une ligne dans "Budget Mensuel"</h3>
      <form id="addRowForm">
        <input type="text" id="mois" placeholder="Mois (ex: Janvier)" required>
        <input type="number" id="revenus" placeholder="Revenus" required>
        <input type="number" id="depenses" placeholder="D√©penses" required>
        <input type="number" id="epargne" placeholder="√âpargne" required>
        <input type="number" id="investissements" placeholder="Investissements" required>
        <input type="number" step="0.01" id="taux" placeholder="Taux (0.25 pour 25%)" required>
        <input type="text" id="commentaire" placeholder="Commentaire">
        <button type="submit">üíæ Enregistrer</button>
      </form>
      <div id="formMessage"></div>
    </div>
  </div>

  <script>
    // ‚úÖ Ton URL Apps Script
    const apiUrl = "https://script.google.com/macros/s/AKfycbxotZys8P2sQtOuQovaI7c7-tVpOCrd0ZtbQ-BeDmrpykfWKDQtpBksi0vZVjv0p8uE/exec";

    // ‚úÖ Gestion de l‚Äôenvoi du formulaire
    document.getElementById("addRowForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      const data = {
        mois: document.getElementById("mois").value,
        revenus: parseFloat(document.getElementById("revenus").value),
        depenses: parseFloat(document.getElementById("depenses").value),
        epargne: parseFloat(document.getElementById("epargne").value),
        investissements: parseFloat(document.getElementById("investissements").value),
        taux: parseFloat(document.getElementById("taux").value),
        commentaire: document.getElementById("commentaire").value
      };

      try {
        const response = await fetch(apiUrl, {
          method: "POST",
          body: JSON.stringify(data),
          headers: {
            "Content-Type": "application/json"
          }
        });

        const result = await response.json();

        if (result.result === "success") {
          document.getElementById("formMessage").innerText = "‚úÖ Donn√©es ajout√©es avec succ√®s !";
          document.getElementById("formMessage").style.color = "#39b46e";
          document.getElementById("addRowForm").reset();
        } else {
          document.getElementById("formMessage").innerText = "‚ùå Erreur : " + result.message;
          document.getElementById("formMessage").style.color = "#e53e3e";
        }

      } catch (error) {
        document.getElementById("formMessage").innerText = "‚ö†Ô∏è Erreur : " + error.message;
        document.getElementById("formMessage").style.color = "#e53e3e";
      }
    });
  </script>
</body>
</html>




